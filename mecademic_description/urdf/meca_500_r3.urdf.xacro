<robot name="meca_500_r3" xmlns:xacro="http://ros.org/wiki/xacro">
  <link name="world"/>  
  <joint name="world_to_meca_A" type="fixed">
    <parent link="world"/>
    <child link="meca_base_link_A"/>
  </joint>

  <!-- Base link is the center of the robot's bottom plate -->
  <link name="meca_base_link_A">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_base.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_base_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <gazebo>
      <plugin filename="libxbot2_gz_joint_server.so" name="xbot2_gz_joint_server">
         <pid>
            <pid name="meca_axis_1_joint_A" profile="small_mot"/>
            <pid name="meca_axis_2_joint_A" profile="small_mot"/>
            <pid name="meca_axis_3_joint_A" profile="small_mot"/>
            <pid name="meca_axis_4_joint_A" profile="small_mot"/>
            <pid name="meca_axis_5_joint_A" profile="small_mot"/>
            <pid name="meca_axis_6_joint_A" profile="small_mot"/>
         </pid>
         <gain d="5" name="small_mot" p="100"/>
      </plugin>
   </gazebo>

  <!-- Joint 1 -->
  <link name="meca_axis_1_link_A">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j1.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j1_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_1_joint_A" type="revolute">
    <origin xyz="0.012498 0 0.091" rpy="0 0 0" />
    <parent link="meca_base_link_A" />
    <child link="meca_axis_1_link_A" />
    <axis xyz="0 0 1" />
    <limit effort="10.0" velocity="2.61799" lower="-3.05433" upper="3.05433" />
  </joint>

  <!-- Joint 2 -->
  <link name="meca_axis_2_link_A">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j2.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j2_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_2_joint_A" type="revolute">
    <origin xyz="0 0 0.044" rpy="0 0 0" />
    <parent link="meca_axis_1_link_A" />
    <child link="meca_axis_2_link_A" />
    <axis xyz="0 1 0" />
    <limit effort="10.0" velocity="2.61799" lower="-1.22173048" upper="1.5708" />
  </joint>

  <!-- Joint 3 -->
  <link name="meca_axis_3_link_A">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j3.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j3_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_3_joint_A" type="revolute">
    <origin xyz="0 0 0.135" rpy="0 0 0" />
    <parent link="meca_axis_2_link_A" />
    <child link="meca_axis_3_link_A" />
    <axis xyz="0 1 0" />
    <limit effort="10.0" velocity="3.14159" lower="-2.35619" upper="1.22173048" />
  </joint>

  <!-- Joint 4 -->
  <link name="meca_axis_4_link_A">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j4.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j4_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_4_joint_A" type="revolute">
    <origin xyz="0 0 0.038" rpy="0 0 0" />
    <parent link="meca_axis_3_link_A" />
    <child link="meca_axis_4_link_A" />
    <axis xyz="1 0 0" />
    <limit effort="10.0" velocity="5.23599" lower="-2.96706" upper="2.96706" />
  </joint>

  <!-- Joint 5 -->
  <link name="meca_axis_5_link_A">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j5.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j5_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_5_joint_A" type="revolute">
    <origin xyz="0.12 0 0" rpy="0 0 0" />
    <parent link="meca_axis_4_link_A" />
    <child link="meca_axis_5_link_A" />
    <axis xyz="0 1 0" />
    <limit effort="10.0" velocity="5.23599" lower="-2.00713" upper="2.00713" />
  </joint>

  <!-- Joint 6 -->
  <link name="meca_axis_6_link_A">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j6.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j6_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_6_joint_A" type="revolute">
    <origin xyz="0.07 0 0" rpy="0 0 0" />
    <parent link="meca_axis_5_link_A" />
    <child link="meca_axis_6_link_A" />
    <axis xyz="1 0 0" />
    <limit effort="10.0" velocity="8.72665" lower="-4.712" upper="4.712" />
  </joint>


<!-- 2nd ROBOT -->
  <joint name="world_to_meca_B" type="fixed">
      <origin xyz="0.2 0.3 0" rpy="0 0 0"/>
      <parent link="world"/>
      <child link="base_link_B"/>
    </joint>

  <gazebo>
      <plugin filename="libxbot2_gz_joint_server.so" name="xbot2_gz_joint_server">
          <pid>
            <pid name="J1_B" profile="small_mot"/>
            <pid name="meca_axis_1_joint_B" profile="small_mot"/>
            <pid name="meca_axis_2_joint_B" profile="small_mot"/>
            <pid name="meca_axis_3_joint_B" profile="small_mot"/>
            <pid name="meca_axis_4_joint_B" profile="small_mot"/>
            <pid name="meca_axis_5_joint_B" profile="small_mot"/>
            <pid name="meca_axis_6_joint_B" profile="small_mot"/>
          </pid>
          <gain d="5" name="small_mot" p="100"/>
      </plugin>
    </gazebo>
  
  <link name="base_link_B">
    <inertial>
      <mass value="10.0"/>
      <inertia ixx="1.0e-03" ixy="0.0" ixz="0.0" iyy="1.0e-03" iyz="0.0" izz="1.0e-03"/>
    </inertial>
  </link>

  <joint name="J1_B" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="1000.0" lower="-6.28" upper="6.28" velocity="100"/>
    <origin rpy="0 0 0" xyz="0.0 0.0 0.05"/>
    <parent link="base_link_B"/>
    <child link="L_1_B"/>
  </joint>

  <link name="L_1_B">
    <visual>
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
      </geometry>
      <material name="blue">
        <color rgba="0 0 .8 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <cylinder length="0.1" radius="0.1"/>
      </geometry>
    </collision>
  </link>

  <joint name="L_1_B_to_meca_base_link_B" type="fixed">
    <parent link="L_1_B"/>
    <child link="meca_base_link_B"/>
    <origin rpy="0 0.7854 0" xyz="0.0 0.0 0.1"/>
  </joint>

    <!-- Base link is the center of the robot's bottom plate -->
  <link name="meca_base_link_B">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_base.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_base_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <!-- Joint 1 -->
  <link name="meca_axis_1_link_B">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j1.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j1_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_1_joint_B" type="revolute">
    <origin xyz="0.012498 0 0.091" rpy="0 0 0" />
    <parent link="meca_base_link_B" />
    <child link="meca_axis_1_link_B" />
    <axis xyz="0 0 1" />
    <limit effort="10.0" velocity="2.61799" lower="-3.05433" upper="3.05433" />
  </joint>

  <!-- Joint 2 -->
  <link name="meca_axis_2_link_B">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j2.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j2_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_2_joint_B" type="revolute">
    <origin xyz="0 0 0.044" rpy="0 0 0" />
    <parent link="meca_axis_1_link_B" />
    <child link="meca_axis_2_link_B" />
    <axis xyz="0 1 0" />
    <limit effort="10.0" velocity="2.61799" lower="-1.22173048" upper="1.5708" />
  </joint>

  <!-- Joint 3 -->
  <link name="meca_axis_3_link_B">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j3.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j3_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_3_joint_B" type="revolute">
    <origin xyz="0 0 0.135" rpy="0 0 0" />
    <parent link="meca_axis_2_link_B" />
    <child link="meca_axis_3_link_B" />
    <axis xyz="0 1 0" />
    <limit effort="10.0" velocity="3.14159" lower="-2.35619" upper="1.22173048" />
  </joint>

  <!-- Joint 4 -->
  <link name="meca_axis_4_link_B">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j4.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j4_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_4_joint_B" type="revolute">
    <origin xyz="0 0 0.038" rpy="0 0 0" />
    <parent link="meca_axis_3_link_B" />
    <child link="meca_axis_4_link_B" />
    <axis xyz="1 0 0" />
    <limit effort="10.0" velocity="5.23599" lower="-2.96706" upper="2.96706" />
  </joint>

  <!-- Joint 5 -->
  <link name="meca_axis_5_link_B">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j5.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j5_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_5_joint_B" type="revolute">
    <origin xyz="0.12 0 0" rpy="0 0 0" />
    <parent link="meca_axis_4_link_B" />
    <child link="meca_axis_5_link_B" />
    <axis xyz="0 1 0" />
    <limit effort="10.0" velocity="5.23599" lower="-2.00713" upper="2.00713" />
  </joint>

  <!-- Joint 6 -->
  <link name="meca_axis_6_link_B">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j6.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://mecademic_description/meshes/meca_500_r3_j6_collision.stl" />
      </geometry>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="meca_axis_6_joint_B" type="revolute">
    <origin xyz="0.07 0 0" rpy="0 0 0" />
    <parent link="meca_axis_5_link_B" />
    <child link="meca_axis_6_link_B" />
    <axis xyz="1 0 0" />
    <limit effort="10.0" velocity="8.72665" lower="-4.712" upper="4.712" />
  </joint>

  <!-- BUFFERS -->
  <joint name="world_to_buffer" type="fixed">
    <origin xyz="0.2 0.1 0.1" rpy="0 0 0"/>
    <parent link="world"/>
    <child link="buffer_base_link"/>
  </joint>
  
  <link name="buffer_base_link"/>   

  <joint name="buffer_base_to_1" type="fixed">
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <parent link="buffer_base_link"/>
    <child link="buffer_1"/>
  </joint>

  <link name="buffer_1"/>

  <joint name="buffer_base_to_2" type="fixed">
        <origin xyz="0.1 0.0 0" rpy="0 0 0"/>
        <parent link="buffer_base_link"/>
        <child link="buffer_2"/>
      </joint>

  <link name="buffer_2"/>

  <!-- CANDY MILL -->
  <joint name="world_to_mill" type="fixed">
    <origin xyz="0.45 0.3 0.1" rpy="0 0 0"/>
    <parent link="world"/>
    <child link="mill_base_link"/>
  </joint>
  
  <link name="mill_base_link"/>   

  <joint name="mill_base_to_stick" type="fixed">
    <origin xyz="0 0 0.15" rpy="0 0 0"/>
    <parent link="mill_base_link"/>
    <child link="mill_stick"/>
  </joint>

  <link name="mill_stick"/>

  <!-- SLIDERS -->
  <joint name="world_to_slider" type="fixed">
    <origin xyz="0.2 0 0.1" rpy="0 0 0"/>
    <parent link="world"/>
    <child link="slider_base_link"/>
  </joint>
  
  <link name="slider_base_link"/>   

  <joint name="slider_base_to_empty" type="fixed">
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <parent link="slider_base_link"/>
    <child link="empty_container"/>
  </joint>

  <link name="empty_container"/>

  <joint name="sliders_base_to_lid" type="fixed">
        <origin xyz="0.1 0.0 0" rpy="0 0 0"/>
        <parent link="slider_base_link"/>
        <child link="lid"/>
      </joint>

  <link name="lid"/>

  <joint name="sliders_base_to_full" type="fixed">
        <origin xyz="0 -0.1 0" rpy="0 0 0"/>
        <parent link="slider_base_link"/>
        <child link="full_container"/>
      </joint>

  <link name="full_container"/>


</robot>
